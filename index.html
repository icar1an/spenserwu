<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N6QJQJ7GKX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-N6QJQJ7GKX');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>spenserwu.com</title>
    <link rel="icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        ::selection {
            background: #accef7;
        }

        body {
            font-family: Arial, sans-serif;
            font-size: 11pt;
            line-height: 1.15;
            color: #000;
            background: #f8f9fa;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            padding: 12px 16px 0;
            background: #fff;
            gap: 8px;
        }

        .doc-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
        }

        .doc-icon svg {
            width: 32px;
            height: 32px;
        }

        .header-middle {
            flex: 1;
            min-width: 0;
        }

        .doc-title-row {
            display: flex;
            align-items: center;
            gap: 2px;
            margin-bottom: 4px;
        }

        .doc-title {
            font-family: 'Google Sans', Arial, sans-serif;
            font-size: 18px;
            font-weight: 400;
            color: #202124;
            border: none;
            outline: none;
            padding: 2px 4px;
            border-radius: 4px;
            background: transparent;
            min-width: 50px;
            max-width: 300px;
        }

        .doc-title:hover,
        .doc-title:focus {
            background: #f1f3f4;
        }

        .icon-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #5f6368;
            flex-shrink: 0;
        }

        .icon-btn:hover {
            background: #f1f3f4;
        }

        .icon-btn.starred svg {
            fill: #fbbc04;
            stroke: #fbbc04;
        }

        .icon-btn svg {
            width: 20px;
            height: 20px;
        }

        .menu-bar {
            display: flex;
            align-items: center;
            font-family: 'Google Sans', Arial, sans-serif;
            font-size: 14px;
            margin-left: -8px;
        }

        .menu-item {
            padding: 4px 8px;
            border-radius: 4px;
            color: #202124;
            cursor: pointer;
            font-size: 14px;
            position: relative;
            white-space: nowrap;
        }

        .menu-item:hover {
            background: #f1f3f4;
        }

        .menu-item.active {
            background: #e8f0fe;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .header-icon-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #5f6368;
        }

        .header-icon-btn:hover {
            background: #f1f3f4;
        }

        .header-icon-btn svg {
            width: 22px;
            height: 22px;
        }

        .share-btn {
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 24px;
            padding: 10px 20px;
            font-family: 'Google Sans', Arial, sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-btn:hover {
            background: #1765cc;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .share-btn svg {
            width: 18px;
            height: 18px;
        }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4285f4 0%, #34a853 50%, #fbbc04 75%, #ea4335 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            overflow: hidden;
        }

        .avatar-inner {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #1a73e8;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        /* Toolbar */
        .toolbar-container {
            background: #fff;
            padding: 4px 8px 8px;
        }

        .toolbar {
            display: flex;
            align-items: center;
            padding: 4px 8px;
            background: #edf2fa;
            border-radius: 24px;
            gap: 2px;
            overflow-x: auto;
        }

        .tool-btn {
            min-width: 28px;
            height: 28px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #444746;
            padding: 0 4px;
            font-size: 12px;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .tool-btn:hover {
            background: #d3e3fd;
        }

        .tool-btn.active {
            background: #c2dbff;
        }

        .tool-btn svg {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        .tool-btn.disabled {
            color: #b0b0b0;
            cursor: default;
        }

        .tool-btn.disabled:hover {
            background: transparent;
        }

        .tool-divider {
            width: 1px;
            height: 20px;
            background: #c4c7c5;
            margin: 0 4px;
            flex-shrink: 0;
        }

        .tool-select {
            display: flex;
            align-items: center;
            padding: 0 4px 0 8px;
            height: 28px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            gap: 2px;
            white-space: nowrap;
        }

        .tool-select:hover {
            background: #d3e3fd;
        }

        .tool-select svg {
            width: 16px;
            height: 16px;
        }

        .font-size-input {
            width: 32px;
            text-align: center;
            border: 1px solid transparent;
            border-radius: 4px;
            font-size: 13px;
            padding: 4px 0;
            background: transparent;
        }

        .font-size-input:hover {
            background: #d3e3fd;
        }

        .font-size-input:focus {
            outline: none;
            border-color: #1a73e8;
            background: #fff;
        }

        /* Main layout */
        .main-container {
            display: flex;
            height: calc(100vh - 100px);
        }

        /* Left sidebar */
        .left-sidebar {
            width: 260px;
            background: #fff;
            border-right: 1px solid #e0e0e0;
            padding: 12px;
            flex-shrink: 0;
            overflow-y: auto;
        }

        .sidebar-back {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            margin: -8px -8px 8px;
            border-radius: 4px;
            cursor: pointer;
            color: #5f6368;
        }

        .sidebar-back:hover {
            background: #f1f3f4;
        }

        .sidebar-back svg {
            width: 20px;
            height: 20px;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 14px;
            color: #202124;
        }

        .sidebar-add {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 50%;
            color: #5f6368;
        }

        .sidebar-add:hover {
            background: #f1f3f4;
        }

        .sidebar-tab {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 8px;
            background: #e8f0fe;
            cursor: pointer;
            gap: 8px;
        }

        .sidebar-tab svg {
            width: 18px;
            height: 18px;
            color: #1967d2;
        }

        .sidebar-tab-name {
            flex: 1;
            font-size: 14px;
            color: #1967d2;
        }

        .sidebar-tab-menu {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            color: #5f6368;
        }

        .sidebar-tab-menu:hover {
            background: rgba(0, 0, 0, 0.08);
        }

        .sidebar-hint {
            font-size: 12px;
            color: #5f6368;
            padding: 12px 0;
            line-height: 1.5;
        }

        /* Ruler */
        .ruler {
            height: 24px;
            background: #fff;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            align-items: flex-end;
            padding: 0 80px;
            position: relative;
        }

        .ruler-track {
            flex: 1;
            max-width: 816px;
            margin: 0 auto;
            height: 12px;
            background: #f1f3f4;
            position: relative;
        }

        .ruler-markers {
            position: absolute;
            top: -12px;
            left: 0;
            right: 0;
            height: 12px;
            display: flex;
            justify-content: space-between;
            padding: 0 2px;
            font-size: 9px;
            color: #5f6368;
        }

        .ruler-indent {
            position: absolute;
            top: 0;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid #9aa0a6;
            cursor: pointer;
        }

        .ruler-indent.left {
            left: 92px;
        }

        .ruler-indent.right {
            right: 92px;
            border-top: none;
            border-bottom: 8px solid #9aa0a6;
        }

        /* Document area */
        .doc-area {
            flex: 1;
            background: #f8f9fa;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .doc-scroll {
            flex: 1;
            padding: 16px;
            display: flex;
            justify-content: center;
        }

        .page {
            width: 816px;
            min-height: 1056px;
            background: #fff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            padding: 96px 96px 72px;
            position: relative;
            outline: none;
            flex-shrink: 0;
        }

        /* Right sidebar */
        .right-sidebar {
            width: 52px;
            background: #fff;
            border-left: 1px solid #e0e0e0;
            padding: 8px 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            flex-shrink: 0;
        }

        .right-sidebar-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #5f6368;
        }

        .right-sidebar-btn:hover {
            background: #f1f3f4;
        }

        .right-sidebar-btn svg {
            width: 22px;
            height: 22px;
        }

        .right-sidebar-spacer {
            flex: 1;
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .left-sidebar {
                display: none;
            }
        }

        @media (max-width: 900px) {
            .right-sidebar {
                display: none;
            }

            .page {
                width: 100%;
                min-height: auto;
                padding: 24px 20px 48px;
                box-shadow: none;
            }

            .ruler {
                display: none;
            }

            .menu-bar {
                display: none;
            }

            .header {
                padding: 8px 12px;
            }

            .header-icon-btn {
                display: none;
            }

            .share-btn {
                padding: 8px 16px;
                font-size: 13px;
            }

            .share-btn svg {
                display: none;
            }

            .doc-title {
                font-size: 16px;
                max-width: 150px;
            }

            .doc-icon {
                width: 32px;
                height: 32px;
            }

            .doc-icon svg {
                width: 28px;
                height: 28px;
            }

            .icon-btn {
                display: none;
            }

            .toolbar-container {
                padding: 4px;
            }

            .toolbar {
                padding: 4px 8px;
                border-radius: 0;
                gap: 0;
            }

            .tool-select {
                display: none;
            }

            .tool-btn {
                min-width: 36px;
                height: 36px;
            }

            .tool-btn svg {
                width: 20px;
                height: 20px;
            }

            .font-size-input {
                display: none;
            }

            .main-container {
                height: auto;
                min-height: calc(100vh - 100px);
            }

            .doc-area {
                min-height: auto;
            }

            .doc-scroll {
                padding: 8px;
            }
        }

        @media (max-width: 600px) {
            .header {
                padding: 6px 8px;
                gap: 6px;
            }

            .header-middle {
                min-width: 0;
            }

            .doc-title {
                font-size: 15px;
                max-width: 120px;
                padding: 2px;
            }

            .share-btn {
                padding: 6px 12px;
                font-size: 12px;
                border-radius: 18px;
            }

            .avatar {
                width: 30px;
                height: 30px;
            }

            .avatar-inner {
                width: 26px;
                height: 26px;
                font-size: 12px;
            }

            .toolbar {
                padding: 2px 4px;
                justify-content: space-around;
            }

            .tool-divider {
                display: none;
            }

            .tool-btn {
                min-width: 40px;
                height: 40px;
            }

            /* Hide less essential toolbar buttons on small screens */
            .tool-btn[title*="Spelling"],
            .tool-btn[title*="Paint"],
            .tool-btn[title*="Search"],
            .tool-btn[title*="Undo"],
            .tool-btn[title*="Redo"],
            .tool-btn[title*="Checklist"],
            .tool-btn[title*="Bulleted"],
            .tool-btn[title*="Numbered"],
            .tool-btn[title*="Decrease indent"],
            .tool-btn[title*="Increase indent"],
            .tool-btn[title*="Clear"],
            .tool-btn[title*="Align"],
            .tool-btn[title*="spacing"],
            .tool-btn[title*="Decrease font"],
            .tool-btn[title*="Increase font"],
            .tool-btn[title*="Text color"],
            .tool-btn[title*="Highlight"] {
                display: none;
            }

            .page {
                padding: 20px 16px 40px;
                font-size: 14px;
                line-height: 1.5;
            }

            .page p {
                margin-bottom: 1em;
            }

            .doc-scroll {
                padding: 4px;
            }
        }

        /* Ensure touch targets are adequate */
        @media (pointer: coarse) {
            .tool-btn {
                min-width: 44px;
                height: 44px;
            }

            .menu-item {
                padding: 8px 12px;
            }

            .dropdown-item {
                padding: 12px 16px;
            }
        }

        /* Cursor */
        .cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background: #000;
            animation: blink 1.06s step-end infinite;
            vertical-align: text-bottom;
            margin-left: 1px;
        }

        @keyframes blink {

            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0;
            }
        }

        /* Content */
        .page p {
            margin-bottom: 1.15em;
            min-height: 1.15em;
        }

        .page a {
            color: #1155cc;
            text-decoration: underline;
            cursor: pointer;
        }

        .page a:hover {
            color: #1a0dab;
        }

        .project-details {
            margin: 4px 0 12px 24px;
            padding: 0;
            color: #5f6368;
            font-size: 10pt;
        }

        .project-details>li {
            margin-bottom: 2px;
            line-height: 1.4;
        }

        /* Per-project collapsible dropdown */
        .project-dropdown {
            margin-bottom: 8px;
        }

        .project-dropdown>summary {
            cursor: pointer;
            outline: none;
            line-height: 1.6;
            padding: 2px 0;
        }

        .project-dropdown>summary:hover {
            color: #202124;
        }

        .project-dropdown>summary::marker {
            color: #9aa0a6;
            font-size: 0.7em;
        }

        .project-dropdown[open]>summary {
            color: #202124;
            margin-bottom: 4px;
        }

        .project-dropdown[open]>summary::marker {
            color: #5f6368;
        }

        /* Taste section: make italic category labels stand out */
        .project-dropdown>summary i {
            color: #202124;
        }

        /* Comment */
        .comment-container {
            position: relative;
        }

        .comment {
            position: absolute;
            left: calc(100% + 48px);
            top: 0;
            width: 280px;
            background: #fff;
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 13px;
            line-height: 1.4;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            z-index: 10;
        }

        .comment:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .comment-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #1a73e8;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .comment-meta {
            flex: 1;
        }

        .comment-author {
            font-weight: 500;
            font-size: 13px;
            color: #202124;
        }

        .comment-time {
            font-size: 11px;
            color: #5f6368;
        }

        .comment-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .highlight {
            background: #fce8b2;
        }

        @media (max-width: 1300px) {
            .comment {
                display: none;
            }

            .highlight {
                background: transparent;
            }
        }

        /* Dropdown menus */
        .dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 2px 6px 2px rgba(60, 64, 67, 0.15);
            min-width: 200px;
            padding: 6px 0;
            display: none;
            z-index: 2000;
        }

        .dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 6px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            font-size: 13px;
            color: #202124;
        }

        .dropdown-item:hover {
            background: #f1f3f4;
        }

        .dropdown-item.disabled {
            color: #9aa0a6;
            cursor: default;
        }

        .dropdown-item.disabled:hover {
            background: transparent;
        }

        .dropdown-divider {
            height: 1px;
            background: #e0e0e0;
            margin: 6px 0;
        }

        .dropdown-shortcut {
            color: #9aa0a6;
            font-size: 12px;
            margin-left: 24px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }

        .modal-overlay.show {
            display: flex;
        }

        /* Daymare Doc Modal */
        .daymare-doc-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #f8f9fa;
            display: none;
            flex-direction: column;
            z-index: 4000;
        }

        .daymare-doc-modal.show {
            display: flex;
        }

        .daymare-doc-header {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: #fff;
            gap: 8px;
            border-bottom: 1px solid #e0e0e0;
        }

        .daymare-doc-header .doc-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
        }

        .daymare-doc-header .doc-icon svg {
            width: 32px;
            height: 32px;
        }

        .daymare-doc-title {
            font-family: 'Google Sans', Arial, sans-serif;
            font-size: 18px;
            font-weight: 400;
            color: #202124;
            flex: 1;
        }

        .daymare-close-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #5f6368;
            background: transparent;
            border: none;
            transition: background 0.2s;
        }

        .daymare-close-btn:hover {
            background: #f1f3f4;
        }

        .daymare-close-btn svg {
            width: 24px;
            height: 24px;
        }

        .daymare-doc-content {
            flex: 1;
            overflow-y: auto;
            display: flex;
            justify-content: center;
            padding: 24px 16px;
        }

        .daymare-page {
            background: #fff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
            width: 100%;
            max-width: 816px;
            height: fit-content;
            min-height: auto;
            padding: 96px;
            padding-bottom: 120px;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
            font-size: 11pt;
            line-height: 1.5;
            color: #000;
        }

        .daymare-page h1 {
            font-size: 18pt;
            font-weight: bold;
            margin-bottom: 24px;
        }

        .daymare-page p {
            margin-bottom: 16px;
            text-align: justify;
        }

        @media (max-width: 900px) {
            .daymare-page {
                padding: 48px 32px;
                min-height: auto;
            }
        }

        @media (max-width: 600px) {
            .daymare-page {
                padding: 24px 16px;
            }
        }

        .modal {
            background: #fff;
            border-radius: 8px;
            width: 90%;
            max-width: 512px;
            box-shadow: 0 24px 38px 3px rgba(0, 0, 0, 0.14);
            max-height: 90vh;
            overflow-y: auto;
        }

        @media (max-width: 600px) {
            .modal {
                width: 95%;
                border-radius: 12px;
            }

            .modal-header {
                padding: 20px 16px 12px;
                font-size: 18px;
            }

            .modal-body {
                padding: 0 16px 16px;
            }

            .modal-footer {
                padding: 12px 16px;
                flex-direction: column;
                gap: 12px;
            }

            .modal-link {
                order: 2;
            }

            .modal-btn {
                width: 100%;
                order: 1;
            }
        }

        .modal-header {
            padding: 24px 24px 16px;
            font-family: 'Google Sans', Arial, sans-serif;
            font-size: 22px;
            color: #202124;
        }

        .modal-body {
            padding: 0 24px 24px;
        }

        .modal-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #dadce0;
            border-radius: 4px;
            font-size: 14px;
            margin-bottom: 16px;
        }

        .modal-input:focus {
            outline: none;
            border-color: #1a73e8;
        }

        .modal-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .modal-row:last-child {
            border-bottom: none;
        }

        .modal-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #34a853;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .modal-user {
            flex: 1;
        }

        .modal-user-name {
            font-weight: 500;
            font-size: 14px;
        }

        .modal-user-email {
            font-size: 12px;
            color: #5f6368;
        }

        .modal-role {
            font-size: 13px;
            color: #5f6368;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
        }

        .modal-role:hover {
            background: #f1f3f4;
        }

        .modal-footer {
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #e0e0e0;
        }

        .modal-link {
            color: #1a73e8;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .modal-link:hover {
            text-decoration: underline;
        }

        .modal-btn {
            background: #1a73e8;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 24px;
            font-family: 'Google Sans', Arial, sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }

        .modal-btn:hover {
            background: #1765cc;
        }

        /* Word Count Modal */
        .word-count-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }

        .word-count-label {
            color: #5f6368;
        }

        .word-count-value {
            font-weight: 500;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #323232;
            color: white;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 4000;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        .toast-action {
            color: #8ab4f8;
            cursor: pointer;
            font-weight: 500;
        }

        /* Context menu */
        .context-menu {
            position: fixed;
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 2px 6px 2px rgba(60, 64, 67, 0.15);
            min-width: 180px;
            padding: 6px 0;
            display: none;
            z-index: 5000;
        }

        .context-menu.show {
            display: block;
        }

        /* Collaborator cursor */
        .collab-cursor {
            position: absolute;
            pointer-events: none;
            z-index: 100;
            display: none;
        }

        .collab-cursor.active {
            display: block;
        }

        .collab-cursor-caret {
            width: 2px;
            height: 18px;
            background: #34a853;
        }

        .collab-cursor-label {
            background: #34a853;
            color: white;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 3px;
            margin-top: 2px;
            font-family: 'Google Sans', Arial, sans-serif;
            white-space: nowrap;
        }

        /* Konami */
        .konami-mode .page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .konami-mode .page a {
            color: #a8d8ff;
        }

        .konami-mode .highlight {
            background: rgba(255, 255, 255, 0.3);
        }

        /* ===== BROKEN TOOLBAR AESTHETIC ===== */

        /* Toolbar container — slight tilt + crack overlay */
        .toolbar {
            transform: rotate(-0.8deg);
            position: relative;
            overflow: visible;
            box-shadow: inset -3px -2px 6px rgba(0, 0, 0, 0.08), 2px 3px 8px rgba(0, 0, 0, 0.06);
        }



        /* Individual tool buttons — randomized damage via nth-child */
        .tool-btn,
        .tool-select {
            transition: transform 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        .tool-btn:nth-child(4n+1) {
            transform: rotate(-5deg) translateY(7px);
            transform-origin: top center;
        }

        .tool-btn:nth-child(4n+2) {
            transform: rotate(4deg) translateY(-3px);
            transform-origin: top center;
        }

        .tool-btn:nth-child(4n+3) {
            transform: rotate(-3deg) translateY(10px);
            transform-origin: top center;
        }

        .tool-btn:nth-child(4n) {
            transform: rotate(6deg) translateY(5px);
            transform-origin: top left;
        }

        .tool-select:nth-child(odd) {
            transform: rotate(-3deg) translateY(5px);
            transform-origin: top center;
        }

        .tool-select:nth-child(even) {
            transform: rotate(2.5deg) translateY(-2px);
            transform-origin: top right;
        }

        /* Hero dangling buttons: Bold, Italic, Underline */
        #boldBtn {
            transform: rotate(-14deg) translateY(28px) !important;
            transform-origin: top center;
            filter: drop-shadow(3px 8px 6px rgba(0, 0, 0, 0.25));
            animation: sway 3.2s ease-in-out infinite;
            position: relative;
        }



        #italicBtn {
            transform: rotate(10deg) translateY(32px) !important;
            transform-origin: top center;
            filter: drop-shadow(3px 10px 8px rgba(0, 0, 0, 0.28));
            animation: sway 3.8s ease-in-out infinite;
            animation-delay: -1.2s;
            position: relative;
        }



        #underlineBtn {
            transform: rotate(-9deg) translateY(22px) !important;
            transform-origin: top center;
            filter: drop-shadow(2px 6px 5px rgba(0, 0, 0, 0.2));
            animation: sway 4.1s ease-in-out infinite;
            animation-delay: -2.5s;
            position: relative;
        }



        /* Tool dividers — bent/broken */
        .tool-divider:nth-child(4n+1) {
            transform: rotate(12deg);
            opacity: 0.4;
        }

        .tool-divider:nth-child(6n) {
            transform: rotate(-18deg) translateY(3px);
            opacity: 0.25;
        }

        .tool-divider:nth-child(8n+3) {
            opacity: 0;
        }

        /* Ruler — warped */
        .ruler {
            transform: skewX(-1.5deg);
        }

        .ruler-track {
            clip-path: polygon(0 0, 100% 2px, 99% 100%, 1% 98%);
        }

        /* Header damage */
        .doc-icon {
            transform: rotate(5deg);
            transition: transform 0.3s ease;
        }

        .share-btn {
            transform: rotate(-2deg) translateY(3px);
            transition: transform 0.3s ease;
        }

        .menu-item:nth-child(odd) {
            transform: rotate(-1.2deg);
        }

        .menu-item:nth-child(even) {
            transform: rotate(0.8deg) translateY(1px);
        }

        /* Drop shadows on dangling elements */
        .tool-btn:nth-child(4n+3) {
            filter: drop-shadow(1px 3px 2px rgba(0, 0, 0, 0.1));
        }

        /* Ambient sway animation — Bold */
        @keyframes sway {

            0%,
            100% {
                transform: rotate(-14deg) translateY(28px);
            }

            25% {
                transform: rotate(-8deg) translateY(25px);
            }

            50% {
                transform: rotate(-18deg) translateY(31px);
            }

            75% {
                transform: rotate(-11deg) translateY(27px);
            }
        }

        /* Italic has its own sway range */
        #italicBtn {
            animation-name: swayItalic;
        }

        @keyframes swayItalic {

            0%,
            100% {
                transform: rotate(10deg) translateY(32px);
            }

            25% {
                transform: rotate(16deg) translateY(29px);
            }

            50% {
                transform: rotate(5deg) translateY(35px);
            }

            75% {
                transform: rotate(13deg) translateY(31px);
            }
        }

        /* Underline has its own sway range */
        #underlineBtn {
            animation-name: swayUnderline;
        }

        @keyframes swayUnderline {

            0%,
            100% {
                transform: rotate(-9deg) translateY(22px);
            }

            25% {
                transform: rotate(-4deg) translateY(19px);
            }

            50% {
                transform: rotate(-14deg) translateY(25px);
            }

            75% {
                transform: rotate(-7deg) translateY(21px);
            }
        }

        /* Creak jolt animation — applied dynamically via JS */
        @keyframes creak {
            0% {
                transform: rotate(var(--base-rot, 0deg)) translateY(var(--base-ty, 0px));
            }

            20% {
                transform: rotate(calc(var(--base-rot, 0deg) + 6deg)) translateY(calc(var(--base-ty, 0px) - 2px));
            }

            40% {
                transform: rotate(calc(var(--base-rot, 0deg) - 4deg)) translateY(calc(var(--base-ty, 0px) + 1px));
            }

            60% {
                transform: rotate(calc(var(--base-rot, 0deg) + 2deg)) translateY(var(--base-ty, 0px));
            }

            100% {
                transform: rotate(var(--base-rot, 0deg)) translateY(var(--base-ty, 0px));
            }
        }

        .creaking {
            animation: creak 0.4s ease-in-out !important;
        }

        /* Disable broken aesthetic on mobile */
        @media (max-width: 900px) {
            .toolbar {
                transform: none;
                box-shadow: none;
            }

            .toolbar::before {
                display: none;
            }

            .tool-btn,
            .tool-select {
                transform: none !important;
                filter: none !important;
                animation: none !important;
            }

            .tool-btn::before {
                display: none !important;
            }

            .tool-divider {
                transform: none !important;
                opacity: 1 !important;
            }

            .ruler {
                transform: none;
            }

            .doc-icon,
            .share-btn,
            .menu-item {
                transform: none !important;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <div class="header">
        <div class="doc-icon" id="docIcon" title="Docs home">
            <svg viewBox="0 0 48 48" fill="none">
                <path d="M7 2h24l10 10v34H7z" fill="#4285f4" />
                <path d="M31 2l10 10H31z" fill="#a1c2fa" />
                <path d="M14 18h20v2H14zm0 6h20v2H14zm0 6h14v2H14z" fill="#fff" />
            </svg>
        </div>
        <div class="header-middle">
            <div class="doc-title-row">
                <input type="text" class="doc-title" id="docTitle" value="untitled doc">
                <div class="icon-btn" id="starBtn" title="Star">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                    </svg>
                </div>
                <div class="icon-btn" title="Move">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V6h5.17l2 2H20v10z" />
                    </svg>
                </div>
            </div>
            <div class="menu-bar">
                <div class="menu-item" data-menu="file">File
                    <div class="dropdown" id="fileMenu">
                        <div class="dropdown-item" data-action="new">New <span class="dropdown-shortcut">Ctrl+N</span>
                        </div>
                        <div class="dropdown-item" data-action="open">Open <span class="dropdown-shortcut">Ctrl+O</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="share">Share</div>
                        <div class="dropdown-item" data-action="download">Download</div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="print">Print <span
                                class="dropdown-shortcut">Ctrl+P</span></div>
                    </div>
                </div>
                <div class="menu-item" data-menu="edit">Edit
                    <div class="dropdown" id="editMenu">
                        <div class="dropdown-item disabled">Undo <span class="dropdown-shortcut">Ctrl+Z</span></div>
                        <div class="dropdown-item disabled">Redo <span class="dropdown-shortcut">Ctrl+Y</span></div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="cut">Cut <span class="dropdown-shortcut">Ctrl+X</span>
                        </div>
                        <div class="dropdown-item" data-action="copy">Copy <span class="dropdown-shortcut">Ctrl+C</span>
                        </div>
                        <div class="dropdown-item" data-action="paste">Paste <span
                                class="dropdown-shortcut">Ctrl+V</span></div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="selectall">Select all <span
                                class="dropdown-shortcut">Ctrl+A</span></div>
                    </div>
                </div>
                <div class="menu-item" data-menu="view">View
                    <div class="dropdown" id="viewMenu">
                        <div class="dropdown-item" data-action="mode">Mode</div>
                        <div class="dropdown-item" data-action="fullscreen">Full screen</div>
                    </div>
                </div>
                <div class="menu-item" data-menu="insert">Insert
                    <div class="dropdown" id="insertMenu">
                        <div class="dropdown-item" data-action="image">Image</div>
                        <div class="dropdown-item" data-action="link">Link <span class="dropdown-shortcut">Ctrl+K</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="horizontal">Horizontal line</div>
                    </div>
                </div>
                <div class="menu-item" data-menu="format">Format
                    <div class="dropdown" id="formatMenu">
                        <div class="dropdown-item" data-action="bold">Bold <span class="dropdown-shortcut">Ctrl+B</span>
                        </div>
                        <div class="dropdown-item" data-action="italic">Italic <span
                                class="dropdown-shortcut">Ctrl+I</span></div>
                        <div class="dropdown-item" data-action="underline">Underline <span
                                class="dropdown-shortcut">Ctrl+U</span></div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="clear">Clear formatting <span
                                class="dropdown-shortcut">Ctrl+\</span></div>
                    </div>
                </div>
                <div class="menu-item" data-menu="tools">Tools
                    <div class="dropdown" id="toolsMenu">
                        <div class="dropdown-item" data-action="wordcount">Word count <span
                                class="dropdown-shortcut">Ctrl+Shift+C</span></div>
                        <div class="dropdown-item" data-action="voice">Voice typing</div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="preferences">Preferences</div>
                    </div>
                </div>
                <div class="menu-item" data-menu="extensions">Extensions
                    <div class="dropdown" id="extensionsMenu">
                        <div class="dropdown-item disabled">No extensions installed</div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="getaddons">Add-ons</div>
                    </div>
                </div>
                <div class="menu-item" data-menu="help">Help
                    <div class="dropdown" id="helpMenu">
                        <div class="dropdown-item" data-action="search">Search the menus</div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="shortcuts">Keyboard shortcuts</div>
                        <div class="dropdown-item" data-action="updates">See what's new</div>
                        <div class="dropdown-divider"></div>
                        <div class="dropdown-item" data-action="existential">Why am I here?</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-right">
            <div class="header-icon-btn" title="Open comment history">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z" />
                </svg>
            </div>
            <div class="header-icon-btn" title="Join a call or present this tab">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM9.5 12.5l2.5 3 3.5-4.5 4.5 6H4.5l3.5-4.5z" />
                </svg>
            </div>
            <button class="share-btn" id="shareBtn">
                <svg viewBox="0 0 24 24" fill="white">
                    <path
                        d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
                </svg>
                Share
            </button>
            <div class="avatar" id="userAvatar" title="Spenser Wu">
                <div class="avatar-inner">S</div>
            </div>
        </div>
    </div>

    <!-- Toolbar -->
    <div class="toolbar-container">
        <div class="toolbar">
            <div class="tool-btn" title="Search the menus (Alt+/)">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-btn disabled" title="Undo (Ctrl+Z)" id="undoBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12.5 8c-2.65 0-5.05 1.04-6.83 2.75L3 8v9h9l-2.83-2.83c1.48-1.48 3.5-2.4 5.83-2.4 3.87 0 7.14 2.65 8.07 6.23l2.12-.71C24.08 13.23 18.86 8 12.5 8z" />
                </svg>
            </div>
            <div class="tool-btn disabled" title="Redo (Ctrl+Y)" id="redoBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M18.4 10.6L21 8v9h-9l2.83-2.83c-1.48-1.48-3.5-2.4-5.83-2.4-3.87 0-7.14 2.65-8.07 6.23l-2.12-.71C-.08 13.23 5.14 8 11.5 8c2.65 0 5.05 1.04 6.83 2.75z" />
                </svg>
            </div>
            <div class="tool-btn" title="Print (Ctrl+P)" id="printBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z" />
                </svg>
            </div>
            <div class="tool-btn" title="Spelling and grammar check (Ctrl+Alt+X)">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48 10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41 5.09 5.09L23 13l-1.41-1.41z" />
                </svg>
            </div>
            <div class="tool-btn" title="Paint format">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M18 4V3c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V6h1v4H9v11c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-9h8V4h-3z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-select" id="zoomSelect">
                100%
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7 10l5 5 5-5z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-select" style="min-width: 100px;" id="styleSelect">
                Normal text
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7 10l5 5 5-5z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-select" style="min-width: 80px;" id="fontSelect">
                Arial
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7 10l5 5 5-5z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-btn" title="Decrease font size (Ctrl+Shift+,)">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 13H5v-2h14v2z" />
                </svg>
            </div>
            <input type="text" class="font-size-input" value="11" title="Font size">
            <div class="tool-btn" title="Increase font size (Ctrl+Shift+.)">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-btn" title="Bold (Ctrl+B)" id="boldBtn" style="font-weight: bold; font-size: 15px;">B</div>
            <div class="tool-btn" title="Italic (Ctrl+I)" id="italicBtn"
                style="font-style: italic; font-size: 15px; font-family: serif;">I</div>
            <div class="tool-btn" title="Underline (Ctrl+U)" id="underlineBtn"
                style="text-decoration: underline; font-size: 15px;">U</div>
            <div class="tool-btn" title="Text color">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M11 3L5.5 17h2.25l1.12-3h6.25l1.12 3h2.25L13 3h-2zm-1.38 9L12 5.67 14.38 12H9.62z" />
                    <path d="M5 19h14v3H5z" fill="#000" />
                </svg>
            </div>
            <div class="tool-btn" title="Highlight color" id="highlightBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M6 14l3 3v5h6v-5l3-3V9H6v5zm5-12h2v3h-2V2zM3.5 5.88l1.41-1.41 2.12 2.12L5.62 8 3.5 5.88zm13.46.71l2.12-2.12 1.41 1.41L18.38 8l-1.42-1.41z" />
                    <path d="M5 19h14v3H5z" fill="#fce8b2" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-btn" title="Insert link (Ctrl+K)" id="linkBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" />
                </svg>
            </div>
            <div class="tool-btn" title="Add comment (Ctrl+Alt+M)" id="commentBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z" />
                    <path d="M12 15h2v2h-2zm0-8h2v6h-2z" />
                </svg>
            </div>
            <div class="tool-btn" title="Insert image" id="imageBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-btn" title="Align & indent">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z" />
                </svg>
                <svg viewBox="0 0 24 24" fill="currentColor" style="width:12px;height:12px;margin-left:-2px;">
                    <path d="M7 10l5 5 5-5z" />
                </svg>
            </div>
            <div class="tool-btn" title="Line & paragraph spacing">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M6 7h2.5L5 3.5 1.5 7H4v10H1.5L5 20.5 8.5 17H6V7zm4-2v2h12V5H10zm0 14h12v-2H10v2zm0-6h12v-2H10v2z" />
                </svg>
                <svg viewBox="0 0 24 24" fill="currentColor" style="width:12px;height:12px;margin-left:-2px;">
                    <path d="M7 10l5 5 5-5z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-btn" title="Checklist menu">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M22 7h-9v2h9V7zm0 8h-9v2h9v-2zM5.54 11L2 7.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L5.54 11zm0 8L2 15.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L5.54 19z" />
                </svg>
                <svg viewBox="0 0 24 24" fill="currentColor" style="width:12px;height:12px;margin-left:-2px;">
                    <path d="M7 10l5 5 5-5z" />
                </svg>
            </div>
            <div class="tool-btn" title="Bulleted list menu">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z" />
                </svg>
                <svg viewBox="0 0 24 24" fill="currentColor" style="width:12px;height:12px;margin-left:-2px;">
                    <path d="M7 10l5 5 5-5z" />
                </svg>
            </div>
            <div class="tool-btn" title="Numbered list menu">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z" />
                </svg>
                <svg viewBox="0 0 24 24" fill="currentColor" style="width:12px;height:12px;margin-left:-2px;">
                    <path d="M7 10l5 5 5-5z" />
                </svg>
            </div>
            <div class="tool-divider"></div>
            <div class="tool-btn" title="Decrease indent (Ctrl+[)">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" />
                </svg>
            </div>
            <div class="tool-btn" title="Increase indent (Ctrl+])">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z" />
                </svg>
            </div>
            <div class="tool-btn" title="Clear formatting (Ctrl+\)">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z" />
                </svg>
            </div>
        </div>
    </div>

    <!-- Main container -->
    <div class="main-container">
        <!-- Left sidebar -->
        <div class="left-sidebar">
            <div class="sidebar-back" title="Hide outline">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                </svg>
            </div>
            <div class="sidebar-header">
                Document tabs
                <div class="sidebar-add" title="Add tab">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                    </svg>
                </div>
            </div>
            <div class="sidebar-tab">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z" />
                </svg>
                <span class="sidebar-tab-name">Tab 1</span>
                <div class="sidebar-tab-menu" title="Tab options">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                        <path
                            d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                    </svg>
                </div>
            </div>
            <div class="sidebar-hint">Headings you add to the document will appear here.</div>
        </div>

        <!-- Document area -->
        <div class="doc-area">
            <!-- Ruler -->
            <div class="ruler">
                <div class="ruler-track">
                    <div class="ruler-markers">
                        <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span>
                    </div>
                    <div class="ruler-indent left"></div>
                    <div class="ruler-indent right"></div>
                </div>
            </div>

            <!-- Document scroll area -->
            <div class="doc-scroll">
                <div class="page" id="page" contenteditable="true">
                    <p>untitled doc<span class="cursor" id="mainCursor"></span></p>

                    <div class="comment-container">
                        <p><span class="highlight" id="highlightedText">all limits are mirages</span></p>
                        <div class="comment" id="comment">
                            <div class="comment-header">
                                <div class="comment-avatar">S</div>
                                <div class="comment-meta">
                                    <div class="comment-author">Spenser Wu</div>
                                    <div class="comment-time" id="commentTime">Today, 3:42 PM</div>
                                </div>
                            </div>
                            <div class="comment-text">mirages, not the map the illusion yk</div>
                        </div>
                    </div>

                    <p></p>

                    <!-- Content loaded from content.md -->
                    <div id="markdown-content"></div>

                    <p></p>



                    <div class="collab-cursor" id="collabCursor">
                        <div class="collab-cursor-caret"></div>
                        <div class="collab-cursor-label">Anonymous Viewer</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right sidebar -->
        <div class="right-sidebar">
            <div class="right-sidebar-btn" title="Calendar">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z" />
                </svg>
            </div>
            <div class="right-sidebar-btn" title="Keep">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z" />
                </svg>
            </div>
            <div class="right-sidebar-btn" title="Tasks">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M22 5.18L10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zM19.79 10.22C19.92 10.79 20 11.39 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8c1.58 0 3.04.46 4.28 1.25l1.44-1.44C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-1.19-.22-2.33-.6-3.39l-1.61 1.61z" />
                </svg>
            </div>
            <div class="right-sidebar-btn" title="Contacts">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z" />
                </svg>
            </div>
            <div class="right-sidebar-btn" title="Maps">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z" />
                </svg>
            </div>
            <div class="right-sidebar-spacer"></div>
            <div class="right-sidebar-btn" title="Get add-ons">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                </svg>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal-overlay" id="shareModal">
        <div class="modal">
            <div class="modal-header">Share "spenser wu"</div>
            <div class="modal-body">
                <input type="text" class="modal-input" placeholder="Add people and groups" id="shareInput">
                <div style="font-size: 13px; color: #5f6368; margin-bottom: 12px;">People with access</div>
                <div class="modal-row">
                    <div class="modal-avatar" style="background: #1a73e8;">S</div>
                    <div class="modal-user">
                        <div class="modal-user-name">Spenser Wu (you)</div>
                        <div class="modal-user-email">spenser.f.wu@gmail.com</div>
                    </div>
                    <div class="modal-role">Owner</div>
                </div>
                <div class="modal-row">
                    <div class="modal-avatar" style="background: #34a853;">?</div>
                    <div class="modal-user">
                        <div class="modal-user-name">Microsoft Clarity</div>
                        <div class="modal-user-email">watching your cursor movements</div>
                    </div>
                    <div class="modal-role">Viewer</div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="modal-link" id="copyLinkBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="#1a73e8">
                        <path
                            d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" />
                    </svg>
                    Copy link
                </div>
                <button class="modal-btn" id="doneBtn">Done</button>
            </div>
        </div>
    </div>

    <!-- Word Count Modal -->
    <div class="modal-overlay" id="wordCountModal">
        <div class="modal" style="max-width: 300px;">
            <div class="modal-header">Word count</div>
            <div class="modal-body">
                <div class="word-count-row">
                    <span class="word-count-label">Pages</span>
                    <span class="word-count-value" id="wcPages">1</span>
                </div>
                <div class="word-count-row">
                    <span class="word-count-label">Words</span>
                    <span class="word-count-value" id="wcWords">0</span>
                </div>
                <div class="word-count-row">
                    <span class="word-count-label">Characters</span>
                    <span class="word-count-value" id="wcChars">0</span>
                </div>
                <div class="word-count-row">
                    <span class="word-count-label">Characters excluding spaces</span>
                    <span class="word-count-value" id="wcCharsNoSpace">0</span>
                </div>
            </div>
            <div class="modal-footer" style="justify-content: flex-end;">
                <button class="modal-btn"
                    onclick="document.getElementById('wordCountModal').classList.remove('show')">OK</button>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <div class="dropdown-item" data-action="cut">Cut</div>
        <div class="dropdown-item" data-action="copy">Copy</div>
        <div class="dropdown-item" data-action="paste">Paste</div>
        <div class="dropdown-divider"></div>
        <div class="dropdown-item" data-action="selectall">Select all</div>
        <div class="dropdown-divider"></div>
        <div class="dropdown-item" data-action="inspect">Inspect (wait, this isn't a real doc)</div>
    </div>

    <!-- Daymare Doc Modal -->
    <div class="daymare-doc-modal" id="daymareDocModal">
        <div class="daymare-doc-header">
            <div class="doc-icon" title="Back to main doc">
                <svg viewBox="0 0 48 48" fill="none">
                    <path d="M7 2h24l10 10v34H7z" fill="#4285f4" />
                    <path d="M31 2l10 10H31z" fill="#a1c2fa" />
                    <path d="M14 18h20v2H14zm0 6h20v2H14zm0 6h14v2H14z" fill="#fff" />
                </svg>
            </div>
            <div class="daymare-doc-title">daymare</div>
            <button class="daymare-close-btn" id="daymareCloseBtn" title="Close">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
            </button>
        </div>
        <div class="daymare-doc-content">
            <div class="daymare-page">
                <!-- Content loaded dynamically by openWritingEntry() -->
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span id="toastText">Link copied to clipboard</span>
        <span class="toast-action" id="toastAction" style="display:none;">UNDO</span>
    </div>

    <script>
        const GITHUB_USER = 'icar1an';
        const GITHUB_REPO = 'spenserwu.com';

        const page = document.getElementById('page');
        const mainCursor = document.getElementById('mainCursor');
        const shareModal = document.getElementById('shareModal');
        const wordCountModal = document.getElementById('wordCountModal');
        const contextMenu = document.getElementById('contextMenu');
        const toast = document.getElementById('toast');
        const docTitle = document.getElementById('docTitle');
        const daymareDocModal = document.getElementById('daymareDocModal');

        // Markdown content loading
        async function loadMarkdownContent() {
            try {
                const response = await fetch('content.md');
                if (!response.ok) throw new Error('Failed to load content.md');
                const markdown = await response.text();

                // Configure marked with custom renderer for v5+
                const renderer = new marked.Renderer();

                // Custom link renderer - external links open in new tab
                renderer.link = ({ href, title, text }) => {
                    const isExternal = href && (href.startsWith('http://') || href.startsWith('https://'));
                    const isWritingLink = href && href.startsWith('#writing/');

                    let attrs = `href="${href}"`;
                    if (title) attrs += ` title="${title}"`;
                    attrs += ' contenteditable="false"';

                    if (isExternal) {
                        attrs += ' target="_blank" rel="noopener noreferrer"';
                    }

                    // Writing entry links get a class for click handling
                    if (isWritingLink) {
                        attrs += ' class="writing-link"';
                        attrs += ` data-entry="${href.replace('#', '')}"`;
                    }

                    return `<a ${attrs}>${text}</a>`;
                };

                // Custom list renderer - add project-details class
                renderer.list = ({ items, ordered }) => {
                    const tag = ordered ? 'ol' : 'ul';
                    const className = ordered ? '' : ' class="project-details"';
                    const body = items.map(item => {
                        // Use parseInline to render bold, italic, links inside list items
                        const html = marked.parseInline(item.text);
                        return `<li>${html}</li>`;
                    }).join('');
                    return `<${tag}${className}>${body}</${tag}>`;
                };

                // Custom strong renderer for bold
                renderer.strong = ({ text }) => `<b>${text}</b>`;

                // Custom emphasis renderer for italics
                renderer.em = ({ text }) => `<i>${text}</i>`;

                // Custom hr renderer
                renderer.hr = () => '<p></p>';

                // Use the renderer with marked.use() for v5+ compatibility
                marked.use({ renderer });

                const htmlContent = marked.parse(markdown);
                const container = document.getElementById('markdown-content');
                container.innerHTML = htmlContent;

                // Post-process: wrap taste section lists in collapsible <details>
                const lists = container.querySelectorAll('ul.project-details');
                lists.forEach(ul => {
                    const prevEl = ul.previousElementSibling;
                    // Only wrap if preceded by a paragraph (taste category line)
                    if (prevEl && prevEl.tagName === 'P') {
                        const details = document.createElement('details');
                        details.className = 'project-dropdown';
                        const summary = document.createElement('summary');
                        summary.innerHTML = prevEl.innerHTML;
                        details.appendChild(summary);
                        details.appendChild(ul.cloneNode(true));
                        prevEl.replaceWith(details);
                        ul.remove();
                    }
                });

                // Attach writing entry link handlers
                const writingLinks = container.querySelectorAll('.writing-link');
                writingLinks.forEach(link => {
                    link.addEventListener('click', async (e) => {
                        e.preventDefault();
                        const entryPath = link.dataset.entry;
                        const entryName = link.textContent;
                        await openWritingEntry(entryPath, entryName);
                    });
                });
            } catch (error) {
                console.error('Error loading markdown content:', error);
                // Fallback: show error message
                document.getElementById('markdown-content').innerHTML = '<p><i>Content loading...</i></p>';
            }
        }

        // Open a writing entry in the modal
        async function openWritingEntry(entryPath, entryName) {
            try {
                const response = await fetch(entryPath + '.md');
                if (!response.ok) throw new Error('Failed to load ' + entryPath);
                const markdown = await response.text();

                // Parse the writing entry markdown
                const htmlContent = marked.parse(markdown);

                // Update modal title and content
                const modalTitle = document.querySelector('.daymare-doc-title');
                const modalPage = document.querySelector('.daymare-page');

                modalTitle.textContent = entryName;
                modalPage.innerHTML = htmlContent;

                // Show the modal
                daymareDocModal.classList.add('show');
                document.body.style.overflow = 'hidden';
            } catch (error) {
                console.error('Error loading writing entry:', error);
                showToast('Failed to load entry');
            }
        }

        // Load markdown content on page load
        loadMarkdownContent();


        // Hide cursor when typing
        page.addEventListener('focus', () => mainCursor.style.display = 'none');
        page.addEventListener('blur', () => mainCursor.style.display = 'inline-block');

        // Star button
        document.getElementById('starBtn').addEventListener('click', function () {
            this.classList.toggle('starred');
            showToast(this.classList.contains('starred') ? 'Added to starred' : 'Removed from starred');
        });

        // Share modal
        document.getElementById('shareBtn').addEventListener('click', () => shareModal.classList.add('show'));
        document.getElementById('doneBtn').addEventListener('click', () => shareModal.classList.remove('show'));
        shareModal.addEventListener('click', (e) => { if (e.target === shareModal) shareModal.classList.remove('show'); });

        // Copy link
        document.getElementById('copyLinkBtn').addEventListener('click', () => {
            navigator.clipboard.writeText(window.location.href);
            showToast('Link copied to clipboard');
        });

        // Menu dropdowns
        let activeMenu = null;
        document.querySelectorAll('.menu-item[data-menu]').forEach(item => {
            item.addEventListener('click', (e) => {
                e.stopPropagation();
                const dropdown = item.querySelector('.dropdown');
                if (activeMenu && activeMenu !== dropdown) {
                    activeMenu.classList.remove('show');
                    activeMenu.parentElement.classList.remove('active');
                }
                dropdown.classList.toggle('show');
                item.classList.toggle('active');
                activeMenu = dropdown.classList.contains('show') ? dropdown : null;
            });
        });

        document.addEventListener('click', () => {
            if (activeMenu) {
                activeMenu.classList.remove('show');
                activeMenu.parentElement.classList.remove('active');
                activeMenu = null;
            }
            contextMenu.classList.remove('show');
        });

        // Menu actions
        document.querySelectorAll('.dropdown-item[data-action]').forEach(item => {
            item.addEventListener('click', (e) => {
                e.stopPropagation();
                const action = item.dataset.action;
                handleAction(action);
                if (activeMenu) {
                    activeMenu.classList.remove('show');
                    activeMenu.parentElement.classList.remove('active');
                    activeMenu = null;
                }
            });
        });

        function handleAction(action) {
            switch (action) {
                case 'new':
                    window.open('https://docs.new', '_blank');
                    break;
                case 'print':
                    window.print();
                    break;
                case 'share':
                    shareModal.classList.add('show');
                    break;
                case 'download':
                    showToast('Downloading your thoughts...');
                    setTimeout(() => showToast('Just kidding, this is a website'), 2000);
                    break;
                case 'bold':
                    document.execCommand('bold');
                    break;
                case 'italic':
                    document.execCommand('italic');
                    break;
                case 'underline':
                    document.execCommand('underline');
                    break;
                case 'clear':
                    document.execCommand('removeFormat');
                    break;
                case 'selectall':
                    document.execCommand('selectAll');
                    break;
                case 'wordcount':
                    showWordCount();
                    break;
                case 'voice':
                    showToast('Listening... (not really)');
                    break;
                case 'preferences':
                    showToast('Preferences: vibes');
                    break;
                case 'getaddons':
                    showToast('Going outside is the only add-on you need');
                    break;
                case 'shortcuts':
                    showToast('Try the Konami code');
                    break;
                case 'updates':
                    showToast('New: This website now exists');
                    break;
                case 'existential':
                    showToast('To make things on the internet!');
                    break;
                case 'fullscreen':
                    if (document.fullscreenElement) {
                        document.exitFullscreen();
                    } else {
                        document.documentElement.requestFullscreen();
                    }
                    break;
                case 'horizontal':
                    document.execCommand('insertHTML', false, '<hr>');
                    break;
                case 'image':
                    showToast('Imagine an image here');
                    break;
                case 'link':
                    const url = prompt('Enter URL:');
                    if (url) document.execCommand('createLink', false, url);
                    break;
                case 'inspect':
                    showToast('Nice try');
                    break;
            }
        }

        // Toolbar buttons
        document.getElementById('boldBtn').addEventListener('click', () => document.execCommand('bold'));
        document.getElementById('italicBtn').addEventListener('click', () => document.execCommand('italic'));
        document.getElementById('underlineBtn').addEventListener('click', () => document.execCommand('underline'));
        document.getElementById('printBtn').addEventListener('click', () => window.print());
        document.getElementById('linkBtn').addEventListener('click', () => handleAction('link'));
        document.getElementById('imageBtn').addEventListener('click', () => handleAction('image'));
        document.getElementById('commentBtn').addEventListener('click', () => showToast('Comment added to your soul'));

        // Word count
        function showWordCount() {
            const text = page.innerText;
            const words = text.trim().split(/\s+/).filter(w => w.length > 0).length;
            const chars = text.length;
            const charsNoSpace = text.replace(/\s/g, '').length;

            document.getElementById('wcWords').textContent = words;
            document.getElementById('wcChars').textContent = chars;
            document.getElementById('wcCharsNoSpace').textContent = charsNoSpace;
            wordCountModal.classList.add('show');
        }

        wordCountModal.addEventListener('click', (e) => {
            if (e.target === wordCountModal) wordCountModal.classList.remove('show');
        });

        // Context menu
        page.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            contextMenu.style.left = e.clientX + 'px';
            contextMenu.style.top = e.clientY + 'px';
            contextMenu.classList.add('show');
        });

        // Toast
        function showToast(text) {
            document.getElementById('toastText').textContent = text;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Collaborator cursor
        const collabCursor = document.getElementById('collabCursor');

        function triggerCollabCursor() {
            collabCursor.style.left = (Math.random() * 300 + 50) + 'px';
            collabCursor.style.top = (Math.random() * 200 + 100) + 'px';
            collabCursor.classList.add('active');
            setTimeout(() => collabCursor.classList.remove('active'), 3000);
        }

        setTimeout(() => {
            if (Math.random() > 0.5) {
                triggerCollabCursor();
                showToast('Someone is viewing this document');
            }
        }, 5000);

        // Comment click
        document.getElementById('comment').addEventListener('click', () => {
            showToast('Resolve comment? (You can\'t escape your own thoughts)');
        });

        document.getElementById('daymareCloseBtn').addEventListener('click', () => {
            daymareDocModal.classList.remove('show');
            document.body.style.overflow = '';
        });

        // Close daymare modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && daymareDocModal.classList.contains('show')) {
                daymareDocModal.classList.remove('show');
                document.body.style.overflow = '';
            }
        });

        // Doc icon clicks
        let iconClicks = 0;
        document.getElementById('docIcon').addEventListener('click', () => {
            iconClicks++;
            if (iconClicks >= 5) {
                showToast('You found an easter egg. Here\'s nothing.');
                iconClicks = 0;
            }
        });

        // Title change
        docTitle.addEventListener('change', () => {
            document.title = docTitle.value + ' - Google Docs';
            showToast('Renamed to "' + docTitle.value + '"');
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.metaKey || e.ctrlKey) {
                switch (e.key.toLowerCase()) {
                    case 'p':
                        e.preventDefault();
                        window.print();
                        break;
                    case 'k':
                        e.preventDefault();
                        handleAction('link');
                        break;
                }
            }
        });

        // Konami code
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];
        let konamiIndex = 0;

        document.addEventListener('keydown', (e) => {
            if (e.code === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    document.body.classList.toggle('konami-mode');
                    showToast('KONAMI MODE ACTIVATED');
                    konamiIndex = 0;
                }
            } else {
                konamiIndex = 0;
            }
        });

        // Fetch last edit (optional - shows in header)
        async function fetchLastEdit() {
            try {
                const res = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}`);
                if (!res.ok) throw new Error('repo not found');
                const data = await res.json();
                // Could display this somewhere if desired
            } catch (e) { }
        }
        fetchLastEdit();

        // Set comment time dynamically
        const now = new Date();
        const hours = now.getHours();
        const minutes = now.getMinutes();
        const ampm = hours >= 12 ? 'PM' : 'AM';
        const displayHours = hours % 12 || 12;
        document.getElementById('commentTime').textContent = `Today, ${displayHours}:${minutes.toString().padStart(2, '0')} ${ampm}`;
    </script>

    <!-- Broken Toolbar: Proximity-based sway + ambient creak -->
    <script>
        (function () {
            // Only run on desktop
            if (window.innerWidth <= 900) return;

            const toolbar = document.querySelector('.toolbar');
            if (!toolbar) return;

            const toolBtns = toolbar.querySelectorAll('.tool-btn, .tool-select');
            const heroIds = new Set(['boldBtn', 'italicBtn', 'underlineBtn']);
            const swayTargets = Array.from(toolBtns).filter(el => !heroIds.has(el.id));

            // Per-icon current sway angle (smooth)
            const currentAngles = new Float32Array(swayTargets.length);
            const targetAngles = new Float32Array(swayTargets.length);

            let mouseX = -9999;
            let mouseY = -9999;
            let lastMouseX = null;
            let mouseVelX = 0;
            let rafId = null;

            const PROXIMITY_RADIUS = 150; // px — icons within this distance react
            const MAX_ANGLE = 6; // degrees

            function lerp(a, b, t) {
                return a + (b - a) * t;
            }

            // Cache icon center positions (recalc on resize)
            let iconRects = [];
            function cacheRects() {
                iconRects = swayTargets.map(el => {
                    const r = el.getBoundingClientRect();
                    return { cx: r.left + r.width / 2, cy: r.top + r.height / 2 };
                });
            }
            cacheRects();
            window.addEventListener('resize', cacheRects);

            document.addEventListener('mousemove', function (e) {
                mouseX = e.clientX;
                mouseY = e.clientY;

                // Compute horizontal velocity
                if (lastMouseX !== null) {
                    mouseVelX = e.clientX - lastMouseX;
                }
                lastMouseX = e.clientX;

                // Decay velocity when mouse stops
                clearTimeout(window._swayDecayTimer);
                window._swayDecayTimer = setTimeout(function () {
                    mouseVelX = 0;
                    lastMouseX = null;
                }, 100);

                if (!rafId) animateSway();
            });

            function animateSway() {
                let anyActive = false;

                for (let i = 0; i < swayTargets.length; i++) {
                    const rect = iconRects[i];
                    if (!rect) continue;

                    // Distance from mouse to icon center
                    const dx = mouseX - rect.cx;
                    const dy = mouseY - rect.cy;
                    const dist = Math.sqrt(dx * dx + dy * dy);

                    // Proximity falloff: 1.0 at cursor, 0.0 at PROXIMITY_RADIUS
                    const proximity = Math.max(0, 1 - dist / PROXIMITY_RADIUS);

                    // Target angle: velocity-based, scaled by proximity
                    const velocityAngle = Math.max(-MAX_ANGLE, Math.min(MAX_ANGLE, mouseVelX * 0.4));
                    targetAngles[i] = velocityAngle * proximity;

                    // Smooth lerp toward target
                    currentAngles[i] = lerp(currentAngles[i], targetAngles[i], 0.1);

                    // Apply transform only if meaningful
                    if (Math.abs(currentAngles[i]) > 0.05) {
                        const angle = currentAngles[i];
                        swayTargets[i].style.transform = `rotate(${angle}deg) translateY(${Math.abs(angle) * 0.6}px)`;
                        anyActive = true;
                    } else {
                        if (swayTargets[i].style.transform) {
                            swayTargets[i].style.transform = '';
                        }
                        currentAngles[i] = 0;
                    }
                }

                if (anyActive || mouseVelX !== 0) {
                    rafId = requestAnimationFrame(animateSway);
                } else {
                    rafId = null;
                }
            }

            // Ambient creak — random jolt every 8-15 seconds
            function scheduleCreak() {
                const delay = 8000 + Math.random() * 7000;
                setTimeout(function () {
                    if (window.innerWidth <= 900) {
                        scheduleCreak();
                        return;
                    }
                    const idx = Math.floor(Math.random() * swayTargets.length);
                    const el = swayTargets[idx];
                    if (el) {
                        el.classList.add('creaking');
                        el.addEventListener('animationend', function handler() {
                            el.classList.remove('creaking');
                            el.removeEventListener('animationend', handler);
                        });
                    }
                    scheduleCreak();
                }, delay);
            }
            scheduleCreak();
        })();
    </script>
</body>

</html>